# [1343. 大小为 K 且平均值大于等于阈值的子数组数目](https://leetcode.cn/problems/number-of-sub-arrays-of-size-k-and-average-greater-than-or-equal-to-threshold/description/)

题目：

给你一个整数数组 arr 和两个整数 k 和 threshold 。
请你返回长度为 k 且平均值大于等于 threshold 的子数组数目。

* _1 <= arr.length <= 10^5_
* _1 <= arr[i] <= 10^4_
* _1 <= k <= arr.length_
* _0 <= threshold <= 10^4_

示例1:
---
    输入：arr = [2,2,2,2,5,5,5,8], k = 3, threshold = 4
    输出：3
    解释：子数组 [2,5,5],[5,5,5] 和 [5,5,8] 的平均值分别为 4，5 和 6 。其他长度为 3 的子数组的平均值都小于 4 （threshold 的值）。


```python
def numOfSubarrays(self, arr: List[int], k: int, threshold: int) -> int:
    
    # 首先定义结果变量和右界
    ans = vowel = 0

    for i, num in enumerate(arr):
        
        # 入窗口
        vowel += num

        # 求左界
        left = i - k + 1
        if left < 0:
            continue
        
        # 求窗口中的平均值，这里不用判断正负，因为题设 arr 中无负数
        avg = vowel / k

        '''
        这里使用的是 python3 的三元运算符，即如果 avg > threshold 则 ans + 1， 否则 ans + 0
        '''
        ans += 1 if avg > threshold else 0

        vowel -= arr[left]
    return ans
```

灵神版本

```python
class Solution:
    def numOfSubarrays(self, arr: List[int], k: int, threshold: int) -> int:
        ans = s = 0  # 维护窗口元素和
        for i, x in enumerate(arr):
            # 1. 进入窗口
            s += x
            if i < k - 1:  # 窗口大小不足 k
                continue
            # 2. 更新答案
            if s >= k * threshold:
                ans += 1
            # 3. 离开窗口
            s -= arr[i - k + 1]
        return ans
'''
作者：灵茶山艾府
链接：https://leetcode.cn/problems/number-of-sub-arrays-of-size-k-and-average-greater-than-or-equal-to-threshold/solutions/3061222/mo-ban-ding-chang-hua-dong-chuang-kou-py-85sh/
'''
```